"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_mathjax_math-renderer-element_ts"],{70170:(e,t,n)=>{function r(e,t=0,{start:n=!0,middle:r=!0,once:i=!1}={}){let a,o=n,s=0,l=!1;function u(...d){if(l)return;let c=Date.now()-s;s=Date.now(),n&&r&&c>=t&&(o=!0),o?(o=!1,e.apply(this,d),i&&u.cancel()):(r&&c<t||!r)&&(clearTimeout(a),a=setTimeout(()=>{s=Date.now(),e.apply(this,d),i&&u.cancel()},r?t-c:t))}return u.cancel=()=>{clearTimeout(a),l=!0},u}function i(e,t=0,{start:n=!1,middle:i=!1,once:a=!1}={}){return r(e,t,{start:n,middle:i,once:a})}n.d(t,{n:()=>r,s:()=>i})},90374:(e,t,n)=>{n.r(t),n.d(t,{MathRendererElement:()=>MathRendererElement});var r=n(17688),i=n(39595),a=n(51528);let o=class UsageTracker{get(e){return this.usage.get(e)??0}update(e,t=0){let n=this.get(e);this.usage.set(e,t+(n??0))}clear(e){this.usage.delete(e)}total(){return Array.from(this.usage.entries()).reduce((e,[,t])=>e+=t,0)}constructor(){this.usage=new Map}};function s(e,t,n,r){var i,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(o=(a<3?i(o):a>3?i(t,n,o):i(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o}let l="Unable to render expression.",u=RegExp("^(TEX|mjx|MJX)-"),d=["DeclareMathOperator","DeclarePairedDelimiters","renewtagform","newtagform","colorbox","fcolorbox","hphantom","vphantom","phantom","operatorname","Newextarrow","definecolor","mathchoice","unicode","mmlToken"],c=["Misplaced &"],h={em:2,pt:20,pc:.75,ex:2.5},m=Object.keys(h).join("|"),f="-?\\d+.?\\d*?",p=RegExp(`(hskip|hspace|raise|mspace|mskip|kern|lower|above|mkern|moveleft|moveright|rule|Rule|space|Space)({${f}(${m})})+`,"g"),g={ALLOWED_ATTR:[],ALLOW_DATA_ATTR:!1,RETURN_DOM:!0},y={USE_PROFILES:{mathMl:!0},ADD_ATTR:["jax","unselectable","class","style","size","justify","space"],KEEP_CONTENT:!0,CUSTOM_ELEMENT_HANDLING:{tagNameCheck:u,attributeNameCheck:u,allowCustomizedBuiltInElements:!0}},w=new o,E=null,C=null;async function x({staticURL:e}){C||(C=new Promise(async t=>{window.MathJax={...window.MathJax||{},loader:{paths:{mathjax:`${e}/javascripts/mathjax`},load:["ui/safe"]},tex:{inlineMath:[["$","$"]],displayMath:[["$$","$$"]],packages:{"[-]":["noerrors","bbox","html","require","newcommand","action","colortbl"]},maxMacros:1e3},chtml:{fontURL:`${e}/fonts/mathjax`},startup:{typeset:!1,ready(){let e=window.MathJax;e.startup.defaultReady();let t=e.startup.document.menu.menu.find("Renderer");for(let n of(t?.disable(),e.startup.document.inputJax))n.preFilters.add(async({math:e})=>{for(let t of d)e.math.includes(`\\${t}`)&&(e.math=`\\text{${t} macro is not supported}`);return!0},-1e3);let n=e.startup.document?.safe;n&&(n.filterAttributes.set("fontfamily","filterSemiColon"),n.filterAttributes.set("fontstyle","filterSemiColon"),n.filterAttributes.set("fontweight","filterSemiColon"),n.filterMethods.filterSemiColon=function(e,t){let[n]=t.split(/;/);return n})}},options:{enableMenu:!0,renderActions:{addMenu:[1e5]},safeOptions:{allow:{URLs:"none",classes:"none",cssIDs:"none",styles:"safe"},lengthMax:2,safeStyles:{},styleLengths:{}}}},function(){let e=document.createElement("script");e.setAttribute("type","text/x-sre-config"),e.textContent='{ "json": "/static/javascripts/mathjax/mathmaps"}',document.head.appendChild(e)}();try{await n.e("vendors-node_modules_mathjax_es5_tex-chtml-full_js").then(n.t.bind(n,9454,23)),await window.MathJax.startup.promise,E=await n.e("vendors-node_modules_dompurify_dist_purify_js").then(n.t.bind(n,42838,23)),E?.default.addHook("uponSanitizeAttribute",M),t(!0)}catch(e){t(!1)}})),await C||(C=null)}function b(e,t){["mtable"].includes(e.tagName)&&["columnalign"].includes(t.attrName)&&(t.keepAttr=!0,t.forceKeepAttr=!0)}function M(e,t){"class"===t.attrName&&(t.attrValue=t.attrValue.split(" ").filter(e=>u.test(e)||"MathJax"===e).join(" "),""===t.attrValue&&(t.keepAttr=!1))}let MathRendererElement=class MathRendererElement extends HTMLElement{tempDocumentContentForSanitization(){let e=document.implementation.createHTMLDocument("");return e.open(),e.write(`
      <html>
        <body>
          ${this.textContent}
        </body>
      </html>
    `),e.close(),e.body.textContent??""}childIsNode(e){return!!(e&&e.nodeType===Node.ELEMENT_NODE)}isGitHubError(e){return e&&e.classList.contains("flash-error")}isMathJaxContainer(e){return e&&("MJX-CONTAINER"===e.nodeName||"MATH-RENDERER"===e.nodeName)}wasPreviouslyRendered(){let e=this.firstElementChild;return this.isGitHubError(e)||this.isMathJaxContainer(e)}getMathJaxError(e){if(!e)return null;let t=this.mathmlEnabled?"merror":"mjx-merror",n=e.querySelector(t),r=null;return this.mathmlEnabled?(r=n?.textContent??null)&&c.some(e=>r?.includes(e))&&(r=l):r=n?.getAttribute("data-mjx-error")??null,r}renderError({msg:e,raw:t}={}){let n=e??l,i=t??this.textContent;return i?(0,r.XX)((0,r.qy)`<div class="flash flash-error">${n}</div>
        <br />
        <pre>${i}</pre>`,this):(0,r.XX)((0,r.qy)`<div class="flash flash-error">${n}</div>`,this)}checkDisallowedMacros(){let e=[];for(let t of d)this.textContent.includes(`\\${t}`)&&e.push(t);return e}enforcePaddingLimit(e){return e.replace(p,(e,t)=>{let n=RegExp(`(${f}(${m}))+`,"g"),r=e?.match(n);if(!r||!r.length)return e;let i=r.map(e=>{let t=e.split(RegExp(`(${m})`));if(!t.length)return e;let n=Number(t[0]),r=t[1]??"";if(!r)return e;let i=h[r]??0;return n<-i||n>i?`{${i}${r}}`:`{${e}}`});return`${t}${i.join("")}`})}enforceMathJaxSafety(){return this.textContent?this.enforcePaddingLimit(this.textContent):""}setColumnAlignments(){let e=["left","center","right"];for(let t of this.querySelectorAll("mtable[columnalign]")){let n=t.getAttribute("columnalign")?.trim().split(/\s+/);if(n&&n.length>1)for(let r of t.querySelectorAll(":scope > mtr")){let t=r.querySelectorAll("mtd");for(let r=0;r<t.length;r++){let i=t[r],a=n[r]??n[n.length-1];i?.style&&a&&e.includes(a)&&(i.style.textAlign=a)}}}}renderContent(e){let t=this.getMathJaxError(e);if("string"==typeof t){this.renderError({msg:t});return}if(!this.childIsNode(e)){this.renderError();return}let n=E?.default.sanitize(e,y);if(!n){this.renderError();return}if(this.innerHTML=n,!this.mathmlEnabled&&window.MathJax){let e=window.MathJax.startup.output.math;e&&this.childIsNode(this.firstChild)&&(e.typesetRoot=this.firstChild,window.MathJax.startup.output.document.menu.addMenu(e))}}get isInline(){return this.classList.contains("js-inline-math")}get isDisplay(){return this.classList.contains("js-display-math")}get textContent(){return this.firstChild?.textContent??""}set textContent(e){this.firstChild&&(this.firstChild.textContent=e)}async connectedCallback(){this.staticURL=this.getAttribute("data-static-url"),this.runId=this.getAttribute("data-run-id"),w.update(this.runId),await x({staticURL:this.staticURL}),requestAnimationFrame(()=>{this.typeset()})}renderMathML(){let e=this.tempDocumentContentForSanitization(),t=window.MathJax,n=e.trim().replace(RegExp("^\\${1,2}|\\${1,2}$","g"),"");if(t&&t.tex2mml){let e=t.tex2mml(n,{display:!this.isInline});E?.default.addHook("uponSanitizeAttribute",b);let r=E?.default.sanitize(e,{USE_PROFILES:{mathMl:!0},RETURN_DOM:!0});this.renderContent(r.firstElementChild),this.setColumnAlignments()}}async renderMathJax(){let e=this.tempDocumentContentForSanitization(),t=window.MathJax,n=E?.default.sanitize(e,g);t&&t.typesetPromise&&(await t.typesetPromise([n]),this.renderContent(n.firstElementChild))}disconnectedCallback(){w.clear(this.runId)}async typeset(){if(!window.MathJax||this.wasPreviouslyRendered())return;let e=this.textContent.split("{").length;if(w.update(this.runId,e),w.total()>2e3||e>100){this.renderError();return}let t=this.checkDisallowedMacros();if(t.length>0){this.renderError({msg:`The following macros are not allowed: ${t.join(", ")}`});return}this.textContent=this.enforceMathJaxSafety();let n=window.performance.now();this.mathmlEnabled?this.renderMathML():await this.renderMathJax(),this.recordBrowserStats(n)}recordBrowserStats(e){let t={distributionValue:window.performance.now()-e,requestUrl:window.location.href};if(this.isInline)t.distributionKey="MATH_INLINE_RENDERED";else{if(!this.isDisplay)return;t.distributionKey="MATH_DISPLAY_RENDERED"}(0,a.i)(t),(0,a.i)({incrementKey:this.mathmlEnabled?"MATHML_RENDERED":"MATHJAX_RENDERED"})}constructor(...e){super(...e),this.mathmlEnabled=!1}};s([i.CF],MathRendererElement.prototype,"mathmlEnabled",void 0),MathRendererElement=s([i.p_],MathRendererElement)},27756:(e,t,n)=>{let r;function i(){if(!r)throw Error("Client env was requested before it was loaded. This likely means you are attempting to use client env at the module level in SSR, which is not supported. Please move your client env usage into a function.");return r}function a(){return r?.locale??"en-US"}n.d(t,{JK:()=>a,_$:()=>i}),function(){if("undefined"!=typeof document){let e=document.getElementById("client-env");if(e)try{r=JSON.parse(e.textContent||"")}catch(e){console.error("Error parsing client-env",e)}}}()},5728:(e,t,n)=>{n.d(t,{G:()=>i,K:()=>a});var r=n(97156);let i=r.XC?.readyState==="interactive"||r.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{r.XC?.addEventListener("DOMContentLoaded",()=>{e()})}),a=r.XC?.readyState==="complete"?Promise.resolve():new Promise(e=>{r.cg?.addEventListener("load",e)})},97564:(e,t,n)=>{n.d(t,{G7:()=>l,XY:()=>u,fQ:()=>s});var r=n(5225),i=n(27756);function a(){return new Set((0,i._$)().featureFlags.map(e=>e.toLowerCase()))}let o=n(97156).X3?a:(0,r.A)(a);function s(){return Array.from(o())}function l(e){return o().has(e.toLowerCase())}let u={isFeatureEnabled:l}},14740:(e,t,n)=>{n.d(t,{k:()=>o,v:()=>s});var r=n(5225),i=n(97156);let a=(0,r.A)(function(){return i.XC?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}),o=(0,r.A)(function(){return"enterprise"===a()}),s="webpack"},97156:(e,t,n)=>{n.d(t,{KJ:()=>r.KJ,Kn:()=>i.Kn,X3:()=>r.X3,XC:()=>i.XC,cg:()=>i.cg,fV:()=>i.fV,g5:()=>r.g5});var r=n(15572),i=n(86733)},86733:(e,t,n)=>{n.d(t,{Kn:()=>a,XC:()=>r,cg:()=>i,fV:()=>o});let r="undefined"==typeof document?void 0:document,i="undefined"==typeof window?void 0:window,a="undefined"==typeof history?void 0:history,o="undefined"==typeof location?{pathname:"",origin:"",search:"",hash:"",href:""}:location},15572:(e,t,n)=>{n.d(t,{KJ:()=>a,X3:()=>i,g5:()=>o});var r=n(86733);let i=void 0===r.XC,a=!i;function o(){return!!i||!!r.XC.querySelector('react-app[data-ssr="true"]')}},51528:(e,t,n)=>{n.d(t,{X:()=>m,i:()=>u});var r=n(97156),i=n(5728),a=n(14740),o=n(97564),s=n(70170);let l=[];function u(e,t=!1,n=.5){if(!0!==(0,o.G7)("BROWSER_STATS_DISABLED")){if(n<0||n>1)throw RangeError("Sampling probability must be between 0 and 1");void 0===e.timestamp&&(e.timestamp=new Date().getTime()),e.loggedIn=!!r.XC?.head?.querySelector('meta[name="user-login"]')?.content,e.staff=m(),e.bundler=a.v,Math.random()<n&&l.push(e),t?h():c()}}let d=null,c=(0,s.n)(async function(){await i.K,null==d&&(d=window.requestIdleCallback(h))},5e3);function h(){if(d=null,!l.length)return;let e=r.XC?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(e){for(let t of function(e){let t=[],n=e.map(e=>JSON.stringify(e));for(;n.length>0;)t.push(function(e){let t=e.shift(),n=[t],r=t.length;for(;e.length>0&&r<=65536;){let t=e[0].length;if(r+t<=65536){let i=e.shift();n.push(i),r+=t}else break}return n}(n));return t}(l))!function(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}(e,`{"stats": [${t.join(",")}] }`);l=[]}}function m(){return!!r.XC?.head?.querySelector('meta[name="user-staff"]')?.content}r.XC?.addEventListener("pagehide",h),r.XC?.addEventListener("visibilitychange",h)},5225:(e,t,n)=>{function r(...e){return JSON.stringify(e,(e,t)=>"object"==typeof t?t:String(t))}function i(e,t={}){let{hash:n=r,cache:i=new Map}=t;return function(...t){let r=n.apply(this,t);if(i.has(r))return i.get(r);let a=e.apply(this,t);return a instanceof Promise&&(a=a.catch(e=>{throw i.delete(r),e})),i.set(r,a),a}}n.d(t,{A:()=>i})}}]);
//# sourceMappingURL=app_components_mathjax_math-renderer-element_ts-3657d52c78c3.js.map